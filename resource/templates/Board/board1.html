<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<!--    <meta content="Untree.co" name="author">-->
<!--    <link href="/static/favicon.png" rel="shortcut icon">-->

<!--    <meta content="" name="description"/>-->
<!--    <meta content="bootstrap, bootstrap4" name="keywords"/>-->

<!--    <link href="https://fonts.googleapis.com" rel="preconnect">-->
<!--    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap"-->
<!--          rel="stylesheet">-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">-->
    <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
    <link href="/css/header.css" rel="stylesheet">
    <link href="/css/board.css" rel="stylesheet">
    <link rel="shortcut icon" href="/images/favicon.ico">
<!--    <link href="/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="/css/owl.carousel.min.css" rel="stylesheet">-->
<!--    <link href="/css/owl.theme.default.min.css" rel="stylesheet">-->
<!--    <link href="/css/jquery.fancybox.min.css" rel="stylesheet">-->
<!--    <link href="/fonts/icomoon/style.css" rel="stylesheet">-->
<!--    <link href="/fonts/flaticon/font/flaticon.css" rel="stylesheet">-->
<!--    <link href="/css/daterangepicker.css" rel="stylesheet">-->
<!--    <link href="https://unpkg.com/aos@next/dist/aos.css" rel="stylesheet"/>-->
<!--    <link href="/css/header.css" rel="stylesheet">-->
<!--    <link href="/css/board.css" rel="stylesheet">-->
<!--    <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">-->

    <title>KeePet - Premium Pet Sitter</title>
</head>

<body>
<!-- ##### Header Area Start ##### -->
<header id="header">
    <div th:replace="~{header.html}"></div>
</header>

</br></br>
</br></br>

<div class="row" id="row">
    <div class="col-12">
<!--        <div class="search-wrapper">-->
<!--            <select id="category">-->
<!--                <option value="UserNickname">ë‹‰ë„¤ì„</option>-->
<!--                <option value="RevTitle">ì œëª©</option>-->
<!--                <option value="RevContent">ë‚´ìš©</option>-->
<!--            </select>-->
<!--            <div class="ui-input-container" id="ui-input">-->
<!--                <input class="ui-input" id="keyword" placeholder="Type something..." required="" type="text"/>-->
<!--                <div class="ui-input-underline"></div>-->
<!--                <div class="ui-input-highlight"></div>-->
<!--                <div class="ui-input-icon">-->
<!--                    <button id="searchBtn" type="submit">-->
<!--                        <svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">-->
<!--                            <path-->
<!--                                    d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z"-->
<!--                                    stroke="currentColor"-->
<!--                                    stroke-linecap="round"-->
<!--                                    stroke-linejoin="round"-->
<!--                                    stroke-width="2"></path>-->
<!--                        </svg>-->
<!--                    </button>-->
<!--                </div>-->
<!--            </div>-->
<!--            <input class="btn-board-form" id="board-form" type="button" value="ê¸€ì“°ê¸°"/>-->
<!--        </div>-->
    </div>
    <form class="board1">
        <br/>

        <div class="divider">
            ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®ğŸ•ğŸ©ğŸ•â€ğŸ¦ºğŸ¦®<input class="btn-board-form" id="board-form" type="button" value="ê¸€ì“°ê¸°"/>
        </div>
        <br>

        <!-- íƒœìš°ê³  ëª©ë¡ ë³´ê¸° -->
        <div class="boardmenu">
            <div class="board-item1 d-flex flex-wrap" id="board-album">
                <!-- ê²Œì‹œê¸€ ë¡œë“œ -->
            </div>

        </div>

        <div class="board1-bod1-a">
            <!-- í˜ì´ì§• ë²„íŠ¼ -->
            <div class="pagination" id="paging">
            </div>

        </div>
    </form>


    <!-- ì˜ˆì•½ ì‘ì„± ëª¨ë‹¬ í¼ -->
    <div class="modal-overlay" id="bWriteModal" style="display: none; ">
        <div class="modal-content">
            <span class="close" id="closeBWriteModal">Ã—</span>
            <h2 class="modal-title" id="bWriteModalLabel">ì˜ˆì•½ ì‘ì„±</h2>
            <div class="modal-body">

                <div class="row">
                    <div class="form-content">
                        <form action="/bWrite" class="form" enctype="multipart/form-data" method="post" name="bWriteForm">
                            <input name="UserId" th:value="${session.loginId}" type="hidden"/>
                            <input name="PetStatus" value="0" type="hidden">

                            <div id="contents">
                                <label for="BTitle">ì œëª©</label>
                                <input class="form-control custom-input" id="BTitle" name="BTitle" readonly
                                       style="border: none"
                                       th:value="'ì‹ ì²­í•©ë‹ˆë‹¤.'" type="text"/>

                                <label for="Guardian_Name">ë³´í˜¸ì ì´ë¦„</label>
                                <input id="Guardian_Name" name="GuardianName" th:value="${session.loginId}" type="text">

                                <label for="Guardian_Phone">ë³´í˜¸ì ì—°ë½ë§</label>
                                <input id="Guardian_Phone" maxlength="11" name="GuardianPhone" pattern="[0-9]{11}"
                                       placeholder="'-'ì—†ì´ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”." th:value="${session.loginPhone}" type="text">

                                <label for="Guardian_Address">ë³´í˜¸ì ì£¼ì†Œ</label>
                                <input id="postCode" onclick="sample6_execDaumPostcode()" type="button" value="ìš°í¸ë²ˆí˜¸ ì°¾ê¸°"><br>
                                <input id="bSample6_address" placeholder="ì£¼ì†Œ" th:value="${session.loginAddress}"
                                       type="text"><br>
                                <input id="Guardian_Address" name="GuardianAddress" type="hidden">

                                <label for="petNum">ë°˜ë ¤ê²¬ ì„ íƒ</label>
                                <select class="form-control custom-select" id="petNum" name="PetNum">
                                    <option value="">-- ì„ íƒ --</option>
                                    <!-- pets ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì‚½ì…ë©ë‹ˆë‹¤. -->
                                </select>

                                <br/>

                                <label for="bService">ì›í•˜ëŠ” ì„œë¹„ìŠ¤</label>
                                <!-- ì„œë¹„ìŠ¤ ì„ íƒ ë²„íŠ¼ë“¤ -->
                                <div class="options">
                                    <button class="option" data-service="1" onclick="selectOption(event, 1)" type="button">
                                        ì‚°ì±…
                                    </button>
                                    <button class="option" data-service="2" onclick="selectOption(event, 2)" type="button">
                                        ëª©ìš•
                                    </button>
                                    <button class="option" data-service="3" onclick="selectOption(event, 3)" type="button">
                                        ë¯¸ìš©
                                    </button>
                                    <button class="option" data-service="4" onclick="selectOption(event, 4)" type="button">
                                        ë³‘ì›
                                    </button>
                                    <button class="option" data-service="5" onclick="selectOption(event, 5)" type="button">
                                        ê³µí•­í”½ì—…
                                    </button>
                                </div>
                                <div class="selected" id="selectedOption"></div>
                                <div class="another-selected" id="anotherSelectedOption"></div>
                                <input id="bService" name="BServices" required type="hidden"/>

                                <label for="Reservation_Date">ì˜ˆì•½ ë‚ ì§œ</label>
                                <input id="Reservation_Date" name="ReservationDate" placeholder="ì˜ˆì•½ ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”."
                                       type="text">

                                <label for="bTime">ì˜ˆì•½ ì‹œê°„</label>
                                <div class="options1">
                                    <button class="option1" data-option="1" type="button">í’€íƒ€ì„(ì˜¤ì „ 8ì‹œ ~ ì˜¤í›„ 7ì‹œ)</button>
                                    <button class="option1" data-option="2" type="button">íŒŒíŠ¸íƒ€ì„(ìƒì„¸ë‚´ìš©ì— í‘œê¸°)</button>
                                    <button class="option1" data-option="3" type="button">í•˜í”„íƒ€ì„A(ì˜¤ì „ 8ì‹œ ~ ì˜¤í›„ 2ì‹œ)</button>
                                    <button class="option1" data-option="4" type="button">í•˜í”„íƒ€ì„B(ì˜¤í›„ 2ì‹œ ~ ì˜¤í›„ 7ì‹œ)</button>
                                </div>
                                <div class="selected" id="selectedOption22"></div>
                                <input id="bTime" name="BTime" required type="hidden"/>

                                <label for="B_Contents">ìƒì„¸ ë‚´ìš©</label>
                                <textarea id="B_Contents" name="BContents" placeholder="íŒŒíŠ¸íƒ€ì„(ì›í•˜ì‹œëŠ” ì‹œê°„ëŒ€), ìš”ì²­ì‚¬í•­ ë“±ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."
                                          type="text"></textarea>

                                <label for="B_File">ì²¨ë¶€íŒŒì¼</label>
                                <input id="B_File" name="BFile" type="file"/>
                                <br/><img id="preImage" width="150px"/>

                                <div id="button">
                                    <input id="bSubmitForm" type="submit" value="ì˜ˆì•½"/>
                                    <input id="cancel" type="button" value="ì·¨ì†Œ"/>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ëª¨ë‹¬ -->
<div id="passwordModal" style="display:none;
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    padding: 20px; border-radius: 8px; background-color: #f9f9f9;
    width: 300px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); z-index: 9999;">

    <!-- ë‹«ê¸° ë²„íŠ¼ -->
    <span id="closePasswordModal" style="position: absolute; top: 10px; right: 10px;
        font-size: 20px; cursor: pointer; color: #777;">x</span>

    <h3 style="text-align: center; font-family: Arial, sans-serif; font-size: 18px; color: #333;">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</h3>

    <label for="password" style="font-size: 14px; color: #555;">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸:</label>
    <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
           style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc;
        border-radius: 4px; font-size: 14px;">

    <button id="submitPassword" style="width: 100%; padding: 10px; background-color: #4CAF50;
        color: white; border: none; border-radius: 4px; font-size: 16px; cursor: pointer;">
        í™•ì¸
    </button>

    <p id="errorMessage" style="color: red; display: none; font-size: 14px;
        text-align: center; margin-top: 10px;">
        ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.
    </p>
</div>





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/jquery-3.4.1.min.js"></script>
<script src="/js/custom.js"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
<script>
    AOS.init();
</script>
</body>

<script>

    // ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
    document.getElementById("closePasswordModal").addEventListener("click", function() {
        document.getElementById("passwordModal").style.display = "none";
    });


    document.addEventListener('DOMContentLoaded', function () {
        const modalOverlay = document.querySelector('.modal-overlay');
        const bWriteModal = document.getElementById('bWriteModal');
        const showBWriteModalBtn = document.getElementById('board-form');
        const closeBWriteModal = document.getElementById('closeBWriteModal');

    // 'ì˜ˆì•½ ì‘ì„±' ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
    showBWriteModalBtn.addEventListener('click', function () {
        // URLì— showModal=true íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•˜ì—¬ ëª¨ë‹¬ í‘œì‹œ
        window.location.href = window.location.pathname + '?showModal=true';
    });

    // ëª¨ë‹¬ ë‹«ê¸°
    closeBWriteModal.addEventListener('click', function () {
        bWriteModal.style.display = 'none';
        modalOverlay.style.display = 'none';
    });

    // ëª¨ë‹¬ ì™¸ë¶€(ì˜¤ë²„ë ˆì´) í´ë¦­ ì‹œ ë‹«ê¸°
    document.querySelector('.modal-overlay').addEventListener("click", function (event) {
        if (event.target === document.querySelector('.modal-overlay')) {
            document.getElementById("bWriteModal").style.display = "none";
            document.querySelector('.modal-overlay').style.display = "none";
        }
    });

    // URL íŒŒë¼ë¯¸í„°ë¡œ showModalì´ trueì´ë©´ ëª¨ë‹¬ì„ ì—´ê¸°
    const urlParams = new URLSearchParams(window.location.search);
    const showModal = urlParams.get('showModal');

    if (showModal === 'true') {
        bWriteModal.style.display = 'block';  // ëª¨ë‹¬ ì—´ê¸°
        modalOverlay.style.display = 'block';  // ë°°ê²½ ì˜¤ë²„ë ˆì´ ì—´ê¸°
        fetchPets();  // ì„œë²„ì—ì„œ pets ëª©ë¡ì„ ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì— ì‚½ì…
    }

    // ì„œë²„ì—ì„œ pets ëª©ë¡ì„ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜
    function fetchPets() {
        fetch("/bWriteForm")
            .then(response => response.json())
            .then(data => {
                const petSelect = document.getElementById('petNum');
                const pets = data.pets;

                // ê¸°ì¡´ì˜ ì˜µì…˜ë“¤ ì´ˆê¸°í™”
                petSelect.innerHTML = '<option value="">-- ì„ íƒ --</option>';

                // pets ëª©ë¡ì„ option íƒœê·¸ë¡œ ì¶”ê°€
                pets.forEach(pet => {
                    const option = document.createElement('option');
                    option.value = pet.petNum;
                    option.textContent = pet.petName;
                    petSelect.appendChild(option);
                });
            })
            .catch(error => {
                console.error('Error fetching pets:', error);
            });
    }
    });


    // $(document).ready(function () {
    //     // ê¸€ì“°ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ "/Board/boardform"ìœ¼ë¡œ ì´ë™
    //     $('#board-form').click(function () {
    //         window.location.href = '/bWriteForm';
    //     });

    let list = [];
    let page = 1;        // í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸
    let limit = 10;       // í•œ í˜ì´ì§€ì— ì¶œë ¥ë  ë°ì´í„° ê°œìˆ˜
    const block = 5;     // í•œ ë¸”ë¡ì— ì¶œë ¥ë  í˜ì´ì§€ ê°œìˆ˜
    let count = 0;       // ì „ì²´ ë°ì´í„° ê°œìˆ˜

    // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
    loadBoardList();

    function loadBoardList() {
        $.ajax({
            type: "post",
            url: "/boardList",
            data: { petStatus: 0 }, // ğŸŸ¢ ë°˜ë ¤ë¬˜(ê³ ì–‘ì´) ë°ì´í„°ë§Œ ìš”ì²­
            success: (result) => {
                list = result;
                count = list.length;  // ì „ì²´ ë°ì´í„° ê°œìˆ˜ ì—…ë°ì´íŠ¸
                pagingList(page);
            },
            error: () => {
                alert('boardList ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨!!');
            }
        });
    }

    function pagingList(page) {
        const maxPage = Math.ceil(count / limit);
        const startRow = (page - 1) * limit;
        const endRow = Math.min(page * limit - 1, count - 1);

        const startPage = Math.floor((page - 1) / block) * block + 1;
        const endPage = Math.min(startPage + block - 1, maxPage);

        // ê²Œì‹œê¸€ ì¶œë ¥ (ì´ë¯¸ì§€ ì•„ë˜ ì œëª©ê³¼ ì‘ì„±ì ì •ë³´ í‘œì‹œ)
        let output = '';
        if (count > 0) {
            for (let i = startRow; i <= endRow; i++) {
                const board = list[i];
                const imageUrl = board[2] ? `/boardupload/${board[2]}` : '/images/default.png'; // ê¸°ë³¸ ì´ë¯¸ì§€ ì„¤ì •
                output += `
            <div class="board-card">
                <div class="thumbnail">
                    <a href="#" class="viewPost" data-board-id="${board[0]}" style="text-decoration: none; color: black;">
                        <img src="${imageUrl}" alt="Thumbnail" onerror="this.src='/images/default.png'" />
                    </a>
                </div>
                <div class="content">
                    <a href="#" class="viewPost" data-board-id="${board[0]}" class="title" style="text-decoration: none; color: black;">${board[1]}ğŸ”’</a> <!-- ê²Œì‹œê¸€ ì œëª© -->
                    <p class="author">${board[3]}</p> <!-- ì‘ì„±ì ì •ë³´ -->
                </div>
            </div>
            `;
            }
        } else {
            output = '<p>ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        }
        $('#board-album').html(output);

        // í˜ì´ì§• ì¶œë ¥
        let pageNum = '';
        pageNum += page <= 1
            ? `<span class="prev">ì´ì „</span>`
            : `<a href="#" class="prev" data-page="${page - 1}">ì´ì „</a>`;

        for (let i = startPage; i <= endPage; i++) {
            pageNum += page === i
                ? `<span class="iNum">${i}</span>`
                : `<a href="#" class="iNum" data-page="${i}">${i}</a>`;
        }

        pageNum += page >= maxPage
            ? `<span class="next">ë‹¤ìŒ</span>`
            : `<a href="#" class="next" data-page="${page + 1}">ë‹¤ìŒ</a>`;

        $('#paging').html(pageNum);
    }

    // ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
    $(document).on('click', '.viewPost', function(e) {
        e.preventDefault(); // ë§í¬ ê¸°ë³¸ ë™ì‘ ë°©ì§€

        const boardId = $(this).data('board-id'); // ê²Œì‹œê¸€ ID
        // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ëª¨ë‹¬ ì—´ê¸°
        $('#passwordModal').show();

        $('#submitPassword').off('click').on('click', function() {
            const password = $('#password').val();

            // ì˜ˆì‹œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (ì„œë²„ì—ì„œ ê´€ë¦¬í•˜ëŠ” ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„êµí•´ì•¼ í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ ì‚¬ìš©)
            const correctPassword = '1234'; // ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½ í•„ìš”

            // ë¹„ë°€ë²ˆí˜¸ê°€ ë§ìœ¼ë©´ ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°ë¡œ ì´ë™, í‹€ë¦¬ë©´ ì˜¤ë¥˜ ë©”ì‹œì§€
            if (password === correctPassword) {
                // ë¹„ë°€ë²ˆí˜¸ê°€ ë§ë‹¤ë©´ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
                window.location.href = `/boarddetail/${boardId}`;
            } else {
                // ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë¦¬ë©´ ì˜¤ë¥˜ ë©”ì‹œì§€
                $('#errorMessage').show();
                $('#password').val(''); // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            }
        });
    });

    // í˜ì´ì§• ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        $('#paging').on('click', 'a', function (e) {
            e.preventDefault();
            page = parseInt($(this).data('page'));
            pagingList(page);
        });

        // ê²Œì‹œê¸€ ê°¯ìˆ˜ ë³€ê²½
        $('#limit').change(function () {
            limit = parseInt($(this).val());
            page = 1; // í˜ì´ì§€ ë²ˆí˜¸ ì´ˆê¸°í™”
            pagingList(page);
        });

    // ì„œë¹„ìŠ¤ ë‹¤ì¤‘ ì„ íƒ ì²˜ë¦¬
    let selectedServices = [];

    // ì›í•˜ëŠ” ì„œë¹„ìŠ¤ ë‹¤ì¤‘ ì„ íƒ ì²˜ë¦¬
    function selectOption(event, option) {
        const serviceButton = event.target; // í´ë¦­ëœ ë²„íŠ¼
        const serviceButtonText = serviceButton.textContent.trim(); // ë²„íŠ¼ í…ìŠ¤íŠ¸(ì„œë¹„ìŠ¤ ì´ë¦„)

        // "ê³µí•­í”½ì—…" ì„ íƒ ì‹œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ì„ íƒ ë¶ˆê°€ëŠ¥í•˜ê²Œ ì²˜ë¦¬
        if (option === 5) {
            // "ê³µí•­í”½ì—…"ì„ ì„ íƒí•œ ê²½ìš°
            if (!selectedServices.includes(5)) {
                // "ê³µí•­í”½ì—…"ì´ ì„ íƒë˜ì§€ ì•Šì•˜ë‹¤ë©´ ë°°ì—´ ì´ˆê¸°í™”
                selectedServices = [5];
                // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™” í›„ "ê³µí•­í”½ì—…" í™œì„±í™”
                document.querySelectorAll('.options button').forEach(button => {
                    button.classList.remove('selected');
                });
                serviceButton.classList.add('selected'); // "ê³µí•­í”½ì—…" ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
            } else {
                // ì´ë¯¸ "ê³µí•­í”½ì—…" ì„ íƒ ì‹œ ì œê±°
                selectedServices = [];
                serviceButton.classList.remove('selected'); // "ê³µí•­í”½ì—…" ì„ íƒ í•´ì œ
            }
        } else {
            // ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•œ ê²½ìš° "ê³µí•­í”½ì—…"ì´ ì´ë¯¸ ì„ íƒë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (selectedServices.includes(5)) {
                alert("ê³µí•­í”½ì—…ì„ ì„ íƒí•œ ê²½ìš° ë‹¤ë¥¸ ì„œë¹„ìŠ¤ëŠ” ì„ íƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                return; // ì„ íƒ ì·¨ì†Œ
            }
        }

        // ì„ íƒëœ ì„œë¹„ìŠ¤ê°€ ë°°ì—´ì— ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸
        const index = selectedServices.indexOf(option);

        if (index === -1) {
            // ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°, ë°°ì—´ì— ì¶”ê°€
            selectedServices.push(option);
            serviceButton.classList.add('selected');  // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
        } else {
            // ì´ë¯¸ ì„ íƒëœ ê²½ìš°, ë°°ì—´ì—ì„œ ì‚­ì œí•˜ì§€ ì•ŠìŒ
            serviceButton.classList.add('selected');  // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½ (ì„ íƒ ìƒíƒœë¡œ ìœ ì§€)
        }

        // ì„ íƒëœ ì„œë¹„ìŠ¤ë“¤ì„ í™”ë©´ì— í‘œì‹œ (ì‚­ì œë˜ì§€ ì•Šê³  ê³„ì† ëˆ„ì )
        updateSelectedServices();
    }

    // 'ì¶”ê°€ëœ ì„œë¹„ìŠ¤'ì—ì„œ í´ë¦­í•˜ë©´ í•´ë‹¹ ì„œë¹„ìŠ¤ ì·¨ì†Œ
    document.getElementById('anotherSelectedOption').addEventListener('click', function (event) {
        const clickedService = event.target;

        if (clickedService.classList.contains('remove-service')) {
            const serviceId = parseInt(clickedService.getAttribute('data-service'));

            // í•´ë‹¹ ì„œë¹„ìŠ¤ê°€ ë°°ì—´ì—ì„œ ì œê±°
            const index = selectedServices.indexOf(serviceId);
            if (index !== -1) {
                selectedServices.splice(index, 1);  // ë°°ì—´ì—ì„œ í•´ë‹¹ ì˜µì…˜ ì œê±°
                // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
                const serviceButton = document.querySelector(`button[data-service="${serviceId}"]`);
                if (serviceButton) {
                    serviceButton.classList.remove('selected');
                }
            }

            // ë‹¤ì‹œ ì„ íƒëœ ì„œë¹„ìŠ¤ë“¤ í™”ë©´ì— ë°˜ì˜
            updateSelectedServices();
        }
    });

    // ì„ íƒëœ ì„œë¹„ìŠ¤ ëª©ë¡ì„ í™”ë©´ì— ê°±ì‹ 
    function updateSelectedServices() {
        const anotherSelectedDiv = document.getElementById('anotherSelectedOption');

        // í™”ë©´ì— í‘œì‹œí•  ì„œë¹„ìŠ¤ ì´ë¦„ ì„¤ì •
        const serviceNames = {
            1: "ì‚°ì±…",
            2: "ëª©ìš•",
            3: "ë¯¸ìš©",
            4: "ë³‘ì›",
            5: "ê³µí•­í”½ì—…",
        };

        // ì„ íƒëœ ì„œë¹„ìŠ¤ë“¤ì„ í™”ë©´ì— í‘œì‹œ (ë‹¤ì‹œ í‘œì‹œí•˜ë„ë¡)
        const selectedServiceHTML = selectedServices.map(id => {
            return `<span class="service">${serviceNames[id]} <button class="remove-service" data-service="${id}">Ã—</button></span>`;
        }).join(', ');

        // ì„ íƒëœ ì„œë¹„ìŠ¤ë“¤ì„ 'ì¶”ê°€ëœ ì„œë¹„ìŠ¤' ì˜ì—­ì—ë§Œ í‘œì‹œ
        anotherSelectedDiv.innerHTML = selectedServiceHTML;

        // ë‹¤ì¤‘ ì„ íƒëœ ì„œë¹„ìŠ¤ ê°’ë“¤ì„ ìˆ¨ê²¨ì§„ inputì— ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì €ì¥
        document.getElementById('bService').value = selectedServices.join(',');

        // ì„ íƒëœ ì„œë¹„ìŠ¤ë“¤ ì½˜ì†” ì¶œë ¥
        console.log('ì„ íƒëœ ì„œë¹„ìŠ¤ë“¤:', selectedServices);

        // ì„ íƒëœ ë°˜ë ¤ê²¬ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
        const petSelect = document.getElementById('petNum'); // ë°˜ë ¤ê²¬ ì„ íƒ ë“œë¡­ë‹¤ìš´
        const petName = petSelect.options[petSelect.selectedIndex].text; // ì„ íƒëœ ì˜µì…˜ì˜ í…ìŠ¤íŠ¸ (ë°˜ë ¤ê²¬ ì´ë¦„)

        // ì œëª© ì„¤ì • ë¡œì§
        let title = "";
        if (selectedServices.includes(5)) {
            title = `${petName}ì„ ë°ë ¤ë‹¤ ì£¼ì„¸ìš”!`;
        } else if (selectedServices.length > 0) {
            title = `${petName}ê³¼ ì‹œê°„ì„ ë³´ë‚´ìš”!`;
        }

        // ì œëª© ì…ë ¥ í•„ë“œì— ìë™ ì…ë ¥
        document.getElementById('BTitle').value = title;
    }

    // ì˜ˆì•½ ì‹œê°„ ì„ íƒ
    document.querySelectorAll('.options1 .option1').forEach(button => {
        button.addEventListener('click', function () {
            const option = this.getAttribute('data-option'); // data-option ì†ì„± ê°’ ê°€ì ¸ì˜¤ê¸°

            // ë²„íŠ¼ì„ ëª¨ë‘ ë¹„í™œì„±í™” ìƒíƒœë¡œ ì´ˆê¸°í™”
            const buttons = document.querySelectorAll('.options1 .option1');
            buttons.forEach(button => {
                button.classList.remove('active');
            });

            // ì„ íƒëœ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
            this.classList.add('active');

            // ì„ íƒëœ ì‹œê°„ ê°’ì„ hidden inputì— ì„¤ì •
            document.getElementById('bTime').value = option;
            console.log('ì„ íƒëœ ì˜ˆì•½ ì‹œê°„:', option);
        });
    });

    // ë‚ ì§œ ë‹¬ë ¥ í˜•ì‹ìœ¼ë¡œ í‘œê¸°
    document.addEventListener('DOMContentLoaded', function () {
        flatpickr("#Reservation_Date", {
            locale: "ko", // í•œêµ­ì–´ ì„¤ì •
            dateFormat: "Y-m-d", // ë‚ ì§œ í˜•ì‹
            minDate: "today", // ì˜¤ëŠ˜ ë‚ ì§œ ì´í›„ë¡œë§Œ ì„ íƒ ê°€ëŠ¥
            altInput: true, // ì…ë ¥ í•„ë“œì— ë‹¬ë ¥ í˜•ì‹ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸°
            altFormat: "Y F J", // í‘œì‹œ í˜•ì‹
            allowInput: true, // ì‚¬ìš©ì ì…ë ¥ ê°€ëŠ¥
        });
    });

</script>

</html>